<div class="container-fluid">
  <div class="row">
    <div class="col-md-2">
      <app-side-nav></app-side-nav>
    </div>
    <div class="col-md-10">
      <h3>
        <img src="https://image.flaticon.com/icons/svg/138/138849.svg" />
        รายการที่ลบ
      </h3>
      <div class="overflow-auto">
        <table class="table table-striped ">
          <thead>
            <tr>
              <th scope="col">วันที่</th>
              <th scope="col">เวลา</th>
              <th style="width: 15%;" scope="col">ต้นทาง</th>
              <th style="width: 15%;" scope="col">ปลายทาง</th>
              <!-- <th scope="col">worktype</th> -->
              <th scope="col">ชื่อลูกค้า</th>
              <!-- <th scope="col">customerPhone</th> -->
              <!-- <th scope="col">customerLine</th> -->
              <!-- <th scope="col">detail</th> -->
              <!-- <th scope="col">status</th> -->
              <th scope="col"></th>
              <!-- <th scope="col">action</th> -->
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let data of job">
              <td (click)="openData(con)">
                {{ data.value.workDate }}
                <!-- {{ data.value.workDate.day }} /{{ data.value.workDate.month }} /
                {{ data.value.workDate.year }} -->
              </td>
              <td (click)="openData(con)">
                {{ data.value.timeHour }}:00 น.
              </td>
              <td (click)="openData(con)">
                <ng-template #con let-c="close" let-d="dismiss">
                  <div [ngStyle]="{ 'background-color': color }" class="header">
                    <h4 class="modal-title" id="modal-basic-title">
                      ข้อมูลการจ้าง
                    </h4>
                    <button
                      type="button"
                      class="close"
                      aria-label="Close"
                      (click)="d('Cross click')"
                      (click)="buttonSave()"
                    >
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <div class="control">
                      <label for="typeahead-basic">ต้นทาง</label>
                      <input
                        id="typeahead-basic"
                        type="text"
                        class="form-control"
                        name="source"
                        ngModel
                        [(ngModel)]="data.value.source"
                        [disabled]="showEdit"
                      />
                      <label for="typeahead-basic">ปลายทาง</label>
                      <input
                        id="typeahead-basic"
                        type="text"
                        class="form-control"
                        name="destination"
                        ngModel
                        [(ngModel)]="data.value.destination"
                        [disabled]="showEdit"
                      />
                      <label for="typeahead-basic">ประเภทงาน</label>
                      <input
                        id="typeahead-basic"
                        type="text"
                        class="form-control"
                        name="worktype"
                        ngModel
                        [(ngModel)]="data.value.worktype"
                        [disabled]="showEdit"
                      />
                      <label for="typeahead-basic">ชื่อลูกค้า</label>
                      <input
                        id="typeahead-basic"
                        type="text"
                        class="form-control"
                        name="customerFirstname"
                        ngModel
                        [(ngModel)]="data.value.customerFirstname"
                        [disabled]="showEdit"
                      />
                      <label for="typeahead-basic"> วันที่</label>
                      <input
                        id="typeahead-basic"
                        type="text"
                        class="form-control"
                        name="workDate"
                        ngModel
                        [(ngModel)]="data.value.workDate"
                        [disabled]="showEdit"
                      />
                      <label for="typeahead-basic"> เวลา</label>
                      <select
                        class="form-control"
                        name="timeHour"
                        [(ngModel)]="data.value.timeHour"
                        ngModel
                      >
                        <option
                          *ngFor="
                            let i of [8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18]
                          "
                          value="{{ i }}"
                          >{{ i }}
                        </option>
                      </select>

                      <select
                        class="form-control"
                        name="timeMinute"
                        [(ngModel)]="data.value.timeMinute"
                        ngModel
                      >
                        <option value="00">00 </option>
                        <option value="15"> 15 </option>
                        <option value="45">45 </option>
                      </select>

                      <label for="typeahead-basic"> เบอร์ติดต่อ</label>
                      <input
                        id="typeahead-basic"
                        type="text"
                        class="form-control"
                        name="customerLine"
                        ngModel
                        [(ngModel)]="data.value.customerPhone"
                        [disabled]="showEdit"
                      />
                      <label for="typeahead-basic"> เบอร์ติดต่อ</label>
                      <input
                        id="typeahead-basic"
                        type="text"
                        class="form-control"
                        name="customerLine"
                        ngModel
                        [(ngModel)]="data.value.customerPhone"
                        [disabled]="showEdit"
                      />
                      <label for="typeahead-basic"> รายละเอียดการจ้าง</label>
                      <input
                        id="typeahead-basic"
                        type="text"
                        class="form-control"
                        name="detail"
                        ngModel
                        [(ngModel)]="data.value.detail"
                        [disabled]="showEdit"
                      />
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn edit"
                        (click)="buttonEdit()"
                      >
                        edit
                      </button>
                      <button
                        [ngStyle]="{ 'background-color': color }"
                        type="button"
                        class="btn submit"
                        (click)="c('Save click')"
                        (click)="buttonSave()"
                      >
                        Save
                      </button>
                    </div>
                  </div>
                </ng-template>
                <!-- {{ data.value.source }} -->
                {{ data.value.subDistictSource }}
                {{ data.value.distictSource }}
                {{ data.value.provinceSource }}
              </td>
              <td (click)="openData(con)">
                <!-- {{ data.value.destination }} -->
                {{ data.value.subDistictDestination }}
                {{ data.value.distictDestination }}
                {{ data.value.provinceDestination }}
              </td>

              <!-- <td (click)="openData(con)">{{ data.value.worktype }}</td> -->
              <td (click)="openData(con)">
                {{ data.value.customerFirstname }}
              </td>
              <!-- <td (click)="openData(con)">{{ data.value.customerPhone }}</td> -->
              <!-- <td (click)="openData(con)">{{ data.value.customerLine }}</td> -->
              <!-- <td (click)="openData(con)">{{ data.value.detail }}</td> -->
              <!-- <td (click)="openData(con)">{{ data.value.status }}</td> -->
              <td>
                <div class="iconGroup">
                  <button
                    type="button"
                    class="btn icon"
                    (click)="open(submitAndDelete, 'submit')"
                    placement="bottom"
                    ngbTooltip="Submit"
                  >
                    <i class="fas fa-check-circle"></i>
                  </button>
                  <button
                    type="button"
                    class="btn icon"
                    (click)="open(submitAndDelete, 'del')"
                    placement="bottom"
                    ngbTooltip="Delete"
                  >
                    <i class="fas fa-trash-alt"></i>
                  </button>
                  <button
                    class="btn icon"
                    (click)="openMap(map)"
                    placement="bottom"
                    ngbTooltip="Map"
                  >
                    <i class="fas fa-map"></i>
                  </button>
                </div>
              </td>

              <!-- checkSubmitAndDelete -->
              <ng-template #submitAndDelete let-c="close" let-d="dismiss">
                <div
                  class="modal-header"
                  [ngStyle]="{ 'background-color': color }"
                >
                  <h4 class="modal-title" id="modal-basic-title">
                    {{ checkSubmitAndDel[0] }}
                  </h4>
                  <button
                    type="button"
                    class="close"
                    aria-label="Close"
                    (click)="d('Cross click')"
                  >
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <!-- <div class="modal-body"></div> -->
                <div class="pop">
                  <!-- <button type="button" class="btn btn-outline-secondary">
                    edit
                  </button> -->

                  <div
                    *ngIf="
                      checkSubmitAndDel[0] === 'ต้องการเปลี่ยนสถานะงานหรือไม่'
                    "
                  >
                    <button
                      type="button"
                      class="btn save"
                      (click)="c('Save click')"
                      (click)="editJob(data)"
                    >
                      {{ checkSubmitAndDel[1] }}
                    </button>
                  </div>
                  <div
                    *ngIf="checkSubmitAndDel[0] === 'ต้องการลบการจ้างหรือไม่'"
                  >
                    <button
                      type="button"
                      class="btn btn-danger"
                      (click)="c('Save click')"
                      (click)="delJob(data)"
                    >
                      {{ checkSubmitAndDel[1] }}
                    </button>
                  </div>
                </div>
              </ng-template>

              <ng-template #map let-c="close" let-d="dismiss">
                <div [ngStyle]="{ 'background-color': color }" class="header">
                  <h4 class="modal-title" id="modal-basic-title">ตำแหน่ง</h4>
                  <button
                    type="button"
                    class="close"
                    aria-label="Close"
                    (click)="d('Cross click')"
                  >
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <p>{{ data.value.customerPhone }}</p>
                  <agm-map
                    [latitude]="data.value.sourceLatitude"
                    [longitude]="data.value.sourceLongitude"
                    [zoom]="zoom"
                  >
                    <agm-marker
                      [label]="'1'"
                      [latitude]="data.value.sourceLatitude"
                      [longitude]="data.value.sourceLongitude"
                      [markerDraggable]="false"
                    >
                    </agm-marker>
                    <agm-marker
                      [label]="'2'"
                      [latitude]="data.value.destLatitude"
                      [longitude]="data.value.destLongitude"
                      [markerDraggable]="false"
                    >
                    </agm-marker>
                    <div *ngFor="let data2 of wikis">
                      <div *ngIf="Addrres">
                        <agm-marker
                          [label]="data2.value.firstname"
                          [latitude]="data2.value.addressLat"
                          [longitude]="data2.value.addressLong"
                          [markerDraggable]="false"
                        >
                        </agm-marker>
                      </div>
                      <div *ngIf="currentAddrres">
                        <agm-marker
                          [label]="'current!!!'"
                          [latitude]="data2.value.currentLat"
                          [longitude]="data2.value.currentLong"
                          [markerDraggable]="false"
                        >
                        </agm-marker>
                      </div>
                    </div>
                  </agm-map>
                </div>
                <div class="modal-footer">
                  <button
                    class="btn icon"
                    (click)="showCurrentAddress('addressEmp')"
                    placement="bottom"
                    ngbTooltip="ตำแหน่งปกติ"
                  >
                    <i class="fas fa-map-marker-alt"></i>
                  </button>
                  <button
                    class="btn icon"
                    (click)="showCurrentAddress('currentAddressEmp')"
                    placement="bottom"
                    ngbTooltip="ตำแหน่งปัจจุบัน"
                  >
                    <i class="fas fa-street-view"></i>
                  </button>
                  <button
                    class="btn icon"
                    (click)="showCurrentAddress('clearAddressEmp')"
                    placement="bottom"
                    ngbTooltip="ปิดแสดงตำแหน่งพนักงาน"
                  >
                    <i class="fas fa-eye-slash"></i>
                  </button>
                  <button
                    type="button"
                    class="btn save "
                    (click)="c('Save click')"
                  >
                    Save
                  </button>
                </div>
              </ng-template>
              <!-- <td>
            <select>
              <option value="">------</option>
              <option [ngValue]="data2" *ngFor="let data2 of car">
                {{ data2.value.carId }}
              </option>``
            </select>
          </td> -->
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
